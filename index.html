<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zona Gamer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0f0f0f;
      color: #fff;
      margin: 0;
    }
    nav {
      background: #181818;
      display: flex;
      justify-content: space-around;
      padding: 10px;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      padding: 10px 15px;
      transition: background 0.3s;
    }
    nav a:hover {
      background: #333;
      border-radius: 5px;
    }
    section {
      display: none;
      padding: 20px;
    }
    section.active {
      display: block;
    }
    iframe {
      border: none;
      width: 100%;
      height: 400px;
    }
    .stream-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 10px;
    }
    .chat-box {
      background: #1e1e1e;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
      max-width: 600px;
      margin: auto;
    }
    #messages {
      height: 300px;
      overflow-y: auto;
      background: #121212;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    input, button {
      padding: 10px;
      border: none;
      border-radius: 4px;
    }
    #nick, #msg {
      width: calc(50% - 5px);
      margin-right: 5px;
    }
    button {
      background: #00aaff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #0088cc;
    }
  </style>
</head>
<body>
  <nav>
    <a href="#" onclick="show('descargas')">Descargas</a>
    <a href="#" onclick="show('chat')">Chat</a>
    <a href="#" onclick="show('streams')">Streams</a>
  </nav>

  <!-- DESCARGAS -->
  <section id="descargas" class="active">
    <h2>ðŸŽ® Descarga tus juegos</h2>
    <ul>
      <li><a href="juegos/game1.zip" download>Juego 1</a></li>
      <li><a href="juegos/game2.zip" download>Juego 2</a></li>
      <li><a href="juegos/game3.zip" download>Juego 3</a></li>
    </ul>
  </section>

  <!-- CHAT -->
  <section id="chat">
    <h2>ðŸ’¬ Chat en vivo</h2>
    <div class="chat-box">
      <div id="messages"></div>
      <input id="nick" placeholder="Tu nombre">
      <input id="msg" placeholder="Escribe un mensaje...">
      <button id="send">Enviar</button>
    </div>
  </section>

  <!-- STREAMS -->
  <section id="streams">
    <h2>ðŸ“º Streams en vivo</h2>
    <div class="stream-grid">
      <iframe src="https://player.twitch.tv/?channel=urielgamer&parent=localhost" allowfullscreen></iframe>
      <iframe src="https://player.twitch.tv/?channel=optijuegos&parent=localhost" allowfullscreen></iframe>
      <iframe src="https://player.kick.com/optijuegos?autoplay=true" allowfullscreen></iframe>
      <iframe src="https://player.twitch.tv/?channel=examplechannel&parent=localhost" allowfullscreen></iframe>
    </div>
  </section>

  <script>
    // NavegaciÃ³n
    function show(id) {
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    // CHAT WEBSOCKET
    const ws = new WebSocket("ws://localhost:8080");
    const messages = document.getElementById("messages");
    const nick = document.getElementById("nick");
    const msg = document.getElementById("msg");
    const send = document.getElementById("send");

    function addMsg(name, text, self=false) {
      const div = document.createElement("div");
      div.innerHTML = `<strong>${name}:</strong> ${text}`;
      div.style.color = self ? "#00aaff" : "#fff";
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    ws.onopen = () => addMsg("Sistema", "Conectado al chat âœ…");
    ws.onmessage = (e) => {
      const data = JSON.parse(e.data);
      addMsg(data.n, data.t);
    };

    send.onclick = () => {
      if (!msg.value.trim()) return;
      const name = nick.value.trim() || "AnÃ³nimo";
      const text = msg.value.trim();
      addMsg(name, text, true);
      ws.send(JSON.stringify({ n: name, t: text }));
      msg.value = "";
    };
  </script>
</body>
</html>
